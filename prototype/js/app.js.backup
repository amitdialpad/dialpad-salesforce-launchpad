// Main App Logic - Handles navigation and page rendering

const App = {
    currentPage: 'home',

    async init() {
        // Initialize data service
        await DataService.init();

        // Initialize role manager
        RoleManager.init();

        // Attach navigation listeners
        this.attachNavigationListeners();

        // Listen for role changes
        window.addEventListener('roleChanged', () => {
            this.renderCurrentPage();
        });

        // Render initial page
        this.renderPage('home');
    },

    attachNavigationListeners() {
        const tabs = document.querySelectorAll('[data-page]');
        tabs.forEach(tab => {
            tab.addEventListener('click', (e) => {
                e.preventDefault();
                const page = e.target.getAttribute('data-page');
                this.renderPage(page);
            });
        });
    },

    renderPage(page) {
        this.currentPage = page;

        // Update active tab
        document.querySelectorAll('.slds-tabs_default__item').forEach(item => {
            item.classList.remove('slds-is-active');
        });
        const activeTab = document.querySelector(`[data-page="${page}"]`).closest('.slds-tabs_default__item');
        if (activeTab) {
            activeTab.classList.add('slds-is-active');
        }

        // Render page content
        const role = RoleManager.getRole();
        const content = document.getElementById('main-content');

        switch(page) {
            case 'home':
                content.innerHTML = this.renderHomePage(role);
                break;
            case 'calls':
                content.innerHTML = this.renderCallsPage(role);
                break;
            case 'sms':
                content.innerHTML = this.renderSmsPage(role);
                break;
            case 'powerdialer':
                content.innerHTML = this.renderPowerdialerPage(role);
                break;
            case 'settings':
                content.innerHTML = this.renderSettingsPage(role);
                break;
            default:
                content.innerHTML = '<p>Page not found</p>';
        }
    },

    renderCurrentPage() {
        this.renderPage(this.currentPage);
    },

    renderHomePage(role) {
        if (role === 'admin') {
            return this.renderAdminDashboard();
        } else if (role === 'supervisor') {
            return this.renderSupervisorDashboard();
        } else {
            return this.renderAgentDashboard();
        }
    },

    renderAdminDashboard() {
        const metrics = DataService.getMetrics('admin');
        const users = DataService.getUsers('admin');

        return `
            <div class="slds-page-header">
                <div class="slds-page-header__row">
                    <div class="slds-page-header__col-title">
                        <div class="slds-media">
                            <div class="slds-media__body">
                                <h1 class="slds-page-header__title slds-truncate" title="Admin Dashboard">Admin Dashboard</h1>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="slds-card metric-card">
                    <div class="slds-card__body slds-card__body_inner">
                        <div class="metric-label">Calls Today</div>
                        <div class="metric-value">${metrics.callsToday}</div>
                    </div>
                </div>
                <div class="slds-card metric-card">
                    <div class="slds-card__body slds-card__body_inner">
                        <div class="metric-label">Active Users</div>
                        <div class="metric-value">${metrics.activeUsers}</div>
                    </div>
                </div>
                <div class="slds-card metric-card">
                    <div class="slds-card__body slds-card__body_inner">
                        <div class="metric-label">Connected Users</div>
                        <div class="metric-value">${metrics.connectedUsers}</div>
                    </div>
                </div>
                <div class="slds-card metric-card">
                    <div class="slds-card__body slds-card__body_inner">
                        <div class="metric-label">Missed Calls</div>
                        <div class="metric-value">${metrics.missedCalls}</div>
                    </div>
                </div>
            </div>

            <div class="slds-grid slds-wrap slds-gutters">
                <div class="slds-col slds-size_1-of-1 slds-medium-size_2-of-3">
                    <div class="slds-card">
                        <div class="slds-card__header slds-grid">
                            <header class="slds-media slds-media_center slds-has-flexi-truncate">
                                <div class="slds-media__body">
                                    <h2 class="slds-card__header-title">User Status</h2>
                                </div>
                            </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                            <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                                <thead>
                                    <tr>
                                        <th scope="col">Name</th>
                                        <th scope="col">Role</th>
                                        <th scope="col">Department</th>
                                        <th scope="col">Calls Today</th>
                                        <th scope="col">Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${users.map(user => `
                                        <tr>
                                            <td>${user.name}</td>
                                            <td>${user.role}</td>
                                            <td>${user.department}</td>
                                            <td>${user.callsToday}</td>
                                            <td>
                                                <span class="slds-badge ${user.dialpadConnected ? 'status-connected' : 'status-disconnected'}">
                                                    ${user.dialpadConnected ? 'Connected' : 'Disconnected'}
                                                </span>
                                            </td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-3">
                    <div class="slds-card">
                        <div class="slds-card__header slds-grid">
                            <header class="slds-media slds-media_center slds-has-flexi-truncate">
                                <div class="slds-media__body">
                                    <h2 class="slds-card__header-title">Announcements</h2>
                                </div>
                            </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                            <ul class="slds-list_dotted">
                                <li>New feature: SMS analytics available</li>
                                <li>Update package to v2.5 in sandbox</li>
                                <li>Scheduled maintenance: Nov 20</li>
                            </ul>
                        </div>
                    </div>

                    <div class="slds-card slds-m-top_medium">
                        <div class="slds-card__header slds-grid">
                            <header class="slds-media slds-media_center slds-has-flexi-truncate">
                                <div class="slds-media__body">
                                    <h2 class="slds-card__header-title">Onboarding</h2>
                                </div>
                            </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                            <ul class="slds-list_dotted">
                                <li>Configure call logging settings</li>
                                <li>Set up user permissions</li>
                                <li>Test integration in sandbox</li>
                                <li>Review analytics dashboards</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="slds-card slds-m-top_medium">
                <div class="slds-card__header slds-grid">
                    <header class="slds-media slds-media_center slds-has-flexi-truncate">
                        <div class="slds-media__body">
                            <h2 class="slds-card__header-title">Calls by Department</h2>
                        </div>
                    </header>
                </div>
                <div class="slds-card__body slds-card__body_inner">
                    <div class="chart-placeholder">Chart: Calls by Department (Placeholder)</div>
                </div>
            </div>
        `;
    },

    renderSupervisorDashboard() {
        const metrics = DataService.getMetrics('supervisor');
        const calls = DataService.getCalls('supervisor').slice(0, 10);
        const lists = DataService.getLists('supervisor').filter(l => l.status === 'Active');

        return `
            <div class="slds-page-header">
                <div class="slds-page-header__row">
                    <div class="slds-page-header__col-title">
                        <div class="slds-media">
                            <div class="slds-media__body">
                                <h1 class="slds-page-header__title slds-truncate" title="Supervisor Dashboard">Supervisor Dashboard</h1>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="slds-card metric-card">
                    <div class="slds-card__body slds-card__body_inner">
                        <div class="metric-label">Team Calls Today</div>
                        <div class="metric-value">${metrics.callsToday}</div>
                    </div>
                </div>
                <div class="slds-card metric-card">
                    <div class="slds-card__body slds-card__body_inner">
                        <div class="metric-label">Avg Call Duration</div>
                        <div class="metric-value">${DataService.formatDuration(metrics.avgCallDuration)}</div>
                    </div>
                </div>
                <div class="slds-card metric-card">
                    <div class="slds-card__body slds-card__body_inner">
                        <div class="metric-label">Missed Calls</div>
                        <div class="metric-value">${metrics.missedCalls}</div>
                    </div>
                </div>
                <div class="slds-card metric-card">
                    <div class="slds-card__body slds-card__body_inner">
                        <div class="metric-label">Team Size</div>
                        <div class="metric-value">${metrics.teamSize}</div>
                    </div>
                </div>
            </div>

            <div class="slds-grid slds-wrap slds-gutters">
                <div class="slds-col slds-size_1-of-1 slds-medium-size_2-of-3">
                    <div class="slds-card">
                        <div class="slds-card__header slds-grid">
                            <header class="slds-media slds-media_center slds-has-flexi-truncate">
                                <div class="slds-media__body">
                                    <h2 class="slds-card__header-title">Recent Team Calls</h2>
                                </div>
                            </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                            <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                                <thead>
                                    <tr>
                                        <th scope="col">Time</th>
                                        <th scope="col">Contact</th>
                                        <th scope="col">Agent</th>
                                        <th scope="col">Duration</th>
                                        <th scope="col">Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${calls.map(call => `
                                        <tr>
                                            <td>${DataService.formatTimestamp(call.timestamp)}</td>
                                            <td>${call.contact}</td>
                                            <td>${call.userName}</td>
                                            <td>${DataService.formatDuration(call.duration)}</td>
                                            <td>${call.status}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-3">
                    <div class="slds-card">
                        <div class="slds-card__header slds-grid">
                            <header class="slds-media slds-media_center slds-has-flexi-truncate">
                                <div class="slds-media__body">
                                    <h2 class="slds-card__header-title">Active Lists</h2>
                                </div>
                            </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                            ${lists.map(list => `
                                <div class="slds-m-bottom_small">
                                    <strong>${list.name}</strong><br>
                                    <small>${list.completedContacts} / ${list.totalContacts} completed</small>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div class="slds-card slds-m-top_medium">
                        <div class="slds-card__header slds-grid">
                            <header class="slds-media slds-media_center slds-has-flexi-truncate">
                                <div class="slds-media__body">
                                    <h2 class="slds-card__header-title">Quick Actions</h2>
                                </div>
                            </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                            <ul class="slds-list_dotted">
                                <li>Review team performance</li>
                                <li>Manage Powerdialer lists</li>
                                <li>View missed calls report</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        `;
    },

    renderAgentDashboard() {
        const metrics = DataService.getMetrics('agent');
        const calls = DataService.getCalls('agent').slice(0, 10);
        const lists = DataService.getLists('agent');

        return `
            <div class="slds-page-header">
                <div class="slds-page-header__row">
                    <div class="slds-page-header__col-title">
                        <div class="slds-media">
                            <div class="slds-media__body">
                                <h1 class="slds-page-header__title slds-truncate" title="My Dashboard">My Dashboard</h1>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="slds-card metric-card">
                    <div class="slds-card__body slds-card__body_inner">
                        <div class="metric-label">Calls Today</div>
                        <div class="metric-value">${metrics.callsToday}</div>
                    </div>
                </div>
                <div class="slds-card metric-card">
                    <div class="slds-card__body slds-card__body_inner">
                        <div class="metric-label">Avg Duration</div>
                        <div class="metric-value">${DataService.formatDuration(metrics.avgCallDuration)}</div>
                    </div>
                </div>
                <div class="slds-card metric-card">
                    <div class="slds-card__body slds-card__body_inner">
                        <div class="metric-label">Total Talk Time</div>
                        <div class="metric-value">${DataService.formatDuration(metrics.totalTalkTime)}</div>
                    </div>
                </div>
                <div class="slds-card metric-card">
                    <div class="slds-card__body slds-card__body_inner">
                        <div class="metric-label">Completed</div>
                        <div class="metric-value">${metrics.completedCalls}</div>
                    </div>
                </div>
            </div>

            <div class="slds-grid slds-wrap slds-gutters">
                <div class="slds-col slds-size_1-of-1 slds-medium-size_2-of-3">
                    <div class="slds-card">
                        <div class="slds-card__header slds-grid">
                            <header class="slds-media slds-media_center slds-has-flexi-truncate">
                                <div class="slds-media__body">
                                    <h2 class="slds-card__header-title">My Recent Calls</h2>
                                </div>
                            </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                            <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                                <thead>
                                    <tr>
                                        <th scope="col">Time</th>
                                        <th scope="col">Contact</th>
                                        <th scope="col">Direction</th>
                                        <th scope="col">Duration</th>
                                        <th scope="col">Disposition</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${calls.map(call => `
                                        <tr>
                                            <td>${DataService.formatTimestamp(call.timestamp)}</td>
                                            <td>${call.contact}</td>
                                            <td>${call.direction}</td>
                                            <td>${DataService.formatDuration(call.duration)}</td>
                                            <td>${call.disposition}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-3">
                    <div class="slds-card">
                        <div class="slds-card__header slds-grid">
                            <header class="slds-media slds-media_center slds-has-flexi-truncate">
                                <div class="slds-media__body">
                                    <h2 class="slds-card__header-title">My Lists</h2>
                                </div>
                            </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                            ${lists.length > 0 ? lists.map(list => `
                                <div class="slds-m-bottom_small">
                                    <strong>${list.name}</strong><br>
                                    <small>${list.completedContacts} / ${list.totalContacts} completed</small>
                                </div>
                            `).join('') : '<p>No lists assigned</p>'}
                        </div>
                    </div>

                    <div class="slds-card slds-m-top_medium">
                        <div class="slds-card__header slds-grid">
                            <header class="slds-media slds-media_center slds-has-flexi-truncate">
                                <div class="slds-media__body">
                                    <h2 class="slds-card__header-title">Tips</h2>
                                </div>
                            </header>
                        </div>
                        <div class="slds-card__body slds-card__body_inner">
                            <ul class="slds-list_dotted">
                                <li>Check voicemail regularly</li>
                                <li>Update call dispositions</li>
                                <li>Follow up on missed calls</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        `;
    },

    renderCallsPage(role) {
        const calls = DataService.getCalls(role);

        return `
            <div class="slds-page-header">
                <div class="slds-page-header__row">
                    <div class="slds-page-header__col-title">
                        <div class="slds-media">
                            <div class="slds-media__body">
                                <h1 class="slds-page-header__title slds-truncate" title="Calls">Calls</h1>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="filters-section">
                <div class="slds-grid slds-wrap slds-gutters">
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                        <label class="slds-form-element__label">Date Range</label>
                        <input type="date" class="slds-input" />
                    </div>
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                        <label class="slds-form-element__label">Status</label>
                        <select class="slds-select">
                            <option>All</option>
                            <option>Completed</option>
                            <option>Missed</option>
                        </select>
                    </div>
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                        <label class="slds-form-element__label">Direction</label>
                        <select class="slds-select">
                            <option>All</option>
                            <option>Inbound</option>
                            <option>Outbound</option>
                        </select>
                    </div>
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-4">
                        <label class="slds-form-element__label">&nbsp;</label>
                        <button class="slds-button slds-button_neutral">Apply Filters</button>
                    </div>
                </div>
            </div>

            <div class="slds-card">
                <div class="slds-card__header slds-grid">
                    <header class="slds-media slds-media_center slds-has-flexi-truncate">
                        <div class="slds-media__body">
                            <h2 class="slds-card__header-title">Call History (${calls.length} records)</h2>
                        </div>
                    </header>
                    <div class="slds-no-flex">
                        <button class="slds-button slds-button_neutral">Export</button>
                    </div>
                </div>
                <div class="slds-card__body">
                    <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                        <thead>
                            <tr>
                                <th scope="col">Time</th>
                                <th scope="col">Contact</th>
                                <th scope="col">Direction</th>
                                <th scope="col">Duration</th>
                                <th scope="col">Status</th>
                                <th scope="col">Disposition</th>
                                ${role !== 'agent' ? '<th scope="col">User</th>' : ''}
                            </tr>
                        </thead>
                        <tbody>
                            ${calls.map(call => `
                                <tr>
                                    <td>${DataService.formatTimestamp(call.timestamp)}</td>
                                    <td>${call.contact}</td>
                                    <td>${call.direction}</td>
                                    <td>${DataService.formatDuration(call.duration)}</td>
                                    <td>${call.status}</td>
                                    <td>${call.disposition}</td>
                                    ${role !== 'agent' ? `<td>${call.userName}</td>` : ''}
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            </div>
        `;
    },

    renderSmsPage(role) {
        return `
            <div class="slds-page-header">
                <div class="slds-page-header__row">
                    <div class="slds-page-header__col-title">
                        <div class="slds-media">
                            <div class="slds-media__body">
                                <h1 class="slds-page-header__title slds-truncate" title="SMS">SMS</h1>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="slds-card">
                <div class="slds-card__body slds-card__body_inner">
                    <p>SMS page - Similar structure to Calls page</p>
                    <p>Would show SMS message history with role-based filtering</p>
                </div>
            </div>
        `;
    },

    renderPowerdialerPage(role) {
        const lists = DataService.getLists(role);

        if (role === 'agent') {
            return `
                <div class="slds-page-header">
                    <div class="slds-page-header__row">
                        <div class="slds-page-header__col-title">
                            <div class="slds-media">
                                <div class="slds-media__body">
                                    <h1 class="slds-page-header__title slds-truncate" title="Powerdialer">Powerdialer</h1>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="slds-grid slds-wrap slds-gutters">
                    <div class="slds-col slds-size_1-of-1 slds-medium-size_2-of-3">
                        <div class="slds-card">
                            <div class="slds-card__header slds-grid">
                                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                                    <div class="slds-media__body">
                                        <h2 class="slds-card__header-title">My Assigned Lists</h2>
                                    </div>
                                </header>
                            </div>
                            <div class="slds-card__body slds-card__body_inner">
                                <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                                    <thead>
                                        <tr>
                                            <th scope="col">List Name</th>
                                            <th scope="col">Total Contacts</th>
                                            <th scope="col">Completed</th>
                                            <th scope="col">Progress</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        ${lists.map(list => {
                                            const progress = Math.round((list.completedContacts / list.totalContacts) * 100);
                                            return `
                                                <tr>
                                                    <td>${list.name}</td>
                                                    <td>${list.totalContacts}</td>
                                                    <td>${list.completedContacts}</td>
                                                    <td>${progress}%</td>
                                                </tr>
                                            `;
                                        }).join('')}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-3">
                        <div class="slds-card">
                            <div class="slds-card__header slds-grid">
                                <header class="slds-media slds-media_center slds-has-flexi-truncate">
                                    <div class="slds-media__body">
                                        <h2 class="slds-card__header-title">Next Up</h2>
                                    </div>
                                </header>
                            </div>
                            <div class="slds-card__body slds-card__body_inner">
                                <strong>John Smith</strong><br>
                                Company: Acme Corp<br>
                                Phone: (415) 555-0123<br>
                                List: Q4 Prospects<br><br>
                                <button class="slds-button slds-button_brand">Call Now</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        } else {
            // Supervisor/Admin view
            return `
                <div class="slds-page-header">
                    <div class="slds-page-header__row">
                        <div class="slds-page-header__col-title">
                            <div class="slds-media">
                                <div class="slds-media__body">
                                    <h1 class="slds-page-header__title slds-truncate" title="Powerdialer">Powerdialer</h1>
                                </div>
                            </div>
                        </div>
                        <div class="slds-page-header__col-actions">
                            <button class="slds-button slds-button_brand">Create List</button>
                        </div>
                    </div>
                </div>

                <div class="slds-card">
                    <div class="slds-card__header slds-grid">
                        <header class="slds-media slds-media_center slds-has-flexi-truncate">
                            <div class="slds-media__body">
                                <h2 class="slds-card__header-title">Manage Lists</h2>
                            </div>
                        </header>
                    </div>
                    <div class="slds-card__body">
                        <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                            <thead>
                                <tr>
                                    <th scope="col">List Name</th>
                                    <th scope="col">Total Contacts</th>
                                    <th scope="col">Completed</th>
                                    <th scope="col">Assigned Agents</th>
                                    <th scope="col">Status</th>
                                    <th scope="col">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${lists.map(list => {
                                    const progress = Math.round((list.completedContacts / list.totalContacts) * 100);
                                    return `
                                        <tr>
                                            <td>${list.name}</td>
                                            <td>${list.totalContacts}</td>
                                            <td>${list.completedContacts} (${progress}%)</td>
                                            <td>${list.assignedAgents.length}</td>
                                            <td><span class="slds-badge">${list.status}</span></td>
                                            <td>
                                                <button class="slds-button slds-button_neutral">Edit</button>
                                            </td>
                                        </tr>
                                    `;
                                }).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
        }
    },

    renderSettingsPage(role) {
        if (role !== 'admin') {
            return `
                <div class="slds-page-header">
                    <div class="slds-page-header__row">
                        <div class="slds-page-header__col-title">
                            <div class="slds-media">
                                <div class="slds-media__body">
                                    <h1 class="slds-page-header__title slds-truncate" title="Settings">Settings</h1>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="slds-card">
                    <div class="slds-card__body slds-card__body_inner">
                        <p>Settings are only accessible to administrators.</p>
                    </div>
                </div>
            `;
        }

        return `
            <div class="slds-page-header">
                <div class="slds-page-header__row">
                    <div class="slds-page-header__col-title">
                        <div class="slds-media">
                            <div class="slds-media__body">
                                <h1 class="slds-page-header__title slds-truncate" title="Settings">Settings</h1>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="slds-card">
                <div class="slds-card__header slds-grid">
                    <header class="slds-media slds-media_center slds-has-flexi-truncate">
                        <div class="slds-media__body">
                            <h2 class="slds-card__header-title">Call Logging Settings</h2>
                        </div>
                    </header>
                </div>
                <div class="slds-card__body slds-card__body_inner">
                    <div class="slds-form">
                        <div class="slds-form-element">
                            <label class="slds-checkbox_toggle">
                                <input type="checkbox" checked />
                                <span class="slds-checkbox_faux_container">
                                    <span class="slds-checkbox_faux"></span>
                                    <span class="slds-checkbox_on">Enabled</span>
                                    <span class="slds-checkbox_off">Disabled</span>
                                </span>
                                <span class="slds-form-element__label">Auto-log all calls</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="slds-card slds-m-top_medium">
                <div class="slds-card__header slds-grid">
                    <header class="slds-media slds-media_center slds-has-flexi-truncate">
                        <div class="slds-media__body">
                            <h2 class="slds-card__header-title">Integration Status</h2>
                        </div>
                    </header>
                </div>
                <div class="slds-card__body slds-card__body_inner">
                    <p>Status: <span class="slds-badge status-connected">Connected</span></p>
                    <p>Last Sync: Nov 17, 2025 3:45 PM</p>
                </div>
            </div>
        `;
    }
};

// Initialize app when DOM is ready
document.addEventListener('DOMContentLoaded', () => {
    App.init();
});
